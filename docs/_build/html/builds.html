<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Build Process &mdash; Citrix SDK 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Citrix SDK 1.0 documentation" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Citrix SDK 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="build-process">
<h1>Build Process<a class="headerlink" href="#build-process" title="Permalink to this headline">¶</a></h1>
<p>Files: <a class="reference external" href="https://github.com/rtfd/readthedocs.org/blob/master/readthedocs/projects/tasks.py">tasks.py</a> - <a class="reference external" href="https://github.com/rtfd/readthedocs.org/tree/master/readthedocs/doc_builder">doc_builder/</a></p>
<p>Every documentation build has limited resources.
Our current build limits are:</p>
<ul class="simple">
<li>15 minutes</li>
<li>1GB of memory</li>
</ul>
<p>We can increase build limits on a per-project basis,
if you provide a good reason your documentation needs more resources.</p>
<div class="section" id="how-we-build-documentation">
<h2>How we build documentation<a class="headerlink" href="#how-we-build-documentation" title="Permalink to this headline">¶</a></h2>
<p>When we import your documentation, we look at two things first: your <em>Repository URL</em> and the <em>Documentation Type</em>.
We will clone your repository,
and then build your documentation using the <em>Documentation Type</em> specified.</p>
<div class="section" id="sphinx">
<h3>Sphinx<a class="headerlink" href="#sphinx" title="Permalink to this headline">¶</a></h3>
<p>When you choose <em>Sphinx</em> as your <em>Documentation Type</em>,
we will first look for a <code class="docutils literal"><span class="pre">conf.py</span></code> file in your repository.
If we don&#8217;t find one,
we will generate one for you.
We will look inside a <code class="docutils literal"><span class="pre">doc</span></code> or <code class="docutils literal"><span class="pre">docs</span></code> directory first,
and then look within your entire project.</p>
<p>Then Sphinx will build any files with an <code class="docutils literal"><span class="pre">.rst</span></code> extension.
If you have a <code class="docutils literal"><span class="pre">README.rst</span></code>,
it will be transformed into an <code class="docutils literal"><span class="pre">index.rst</span></code> automatically.</p>
</div>
<div class="section" id="mkdocs">
<h3>Mkdocs<a class="headerlink" href="#mkdocs" title="Permalink to this headline">¶</a></h3>
<p>When you choose <em>Mkdocs</em> as your <em>Documentation Type</em>,
we will first look for a <code class="docutils literal"><span class="pre">mkdocs.yml</span></code> file in your repository.
If we don&#8217;t find one,
we will generate one for you.
We will look inside a <code class="docutils literal"><span class="pre">doc</span></code> or <code class="docutils literal"><span class="pre">docs</span></code> directory first,
and then default to the top-level of your documentation.</p>
<p>Then Mkdocs will build any files with an <code class="docutils literal"><span class="pre">.md</span></code> extension.
If you have a <code class="docutils literal"><span class="pre">README.md</span></code>,
it will be transformed into an <code class="docutils literal"><span class="pre">index.md</span></code> automatically.
As MkDocs doesn&#8217;t support automatic PDF generation,
Read the Docs cannot create a PDF version of your documentation with the <em>Mkdocs</em> option.</p>
</div>
</div>
<div class="section" id="understanding-what-s-going-on">
<h2>Understanding what&#8217;s going on<a class="headerlink" href="#understanding-what-s-going-on" title="Permalink to this headline">¶</a></h2>
<p>Understanding how Read the Docs builds your project will help you with debugging the problems you have with the site. It should also allow you to take advantage of certain things that happen during the build process.</p>
<p>The first step of the process is that we check out your code from the repository you have given us. If the code is already checked out, we update the copy to the branch that you have specified in your projects configuration.</p>
<p>Then we build the proper backend code for the type of documentation you&#8217;ve selected.</p>
<p>If you have the <em>Install Project</em> option enabled, we will run <code class="docutils literal"><span class="pre">setup.py</span> <span class="pre">install</span></code> on your package, installing it into a virtual environment. You can also define additional packages to install with the <em>Requirements File</em> option.</p>
<p>When we build your documentation, we run <cite>sphinx-build -b html . _build/html</cite>, where <cite>html</cite> would be replaced with the correct backend. We also create man pages and pdf&#8217;s automatically based on your project.</p>
<p>Then these files are copied across to our application servers from the build server. Once on the application servers, they are served from nginx.</p>
<p>An example in code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">update_imported_docs</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
<span class="k">if</span> <span class="n">exists</span><span class="p">(</span><span class="s">&#39;setup.py&#39;</span><span class="p">):</span>
    <span class="n">run</span><span class="p">(</span><span class="s">&#39;python setup.py install&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">project</span><span class="o">.</span><span class="n">requirements_file</span><span class="p">:</span>
    <span class="n">run</span><span class="p">(</span><span class="s">&#39;pip install -r </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">project</span><span class="o">.</span><span class="n">requirements_file</span><span class="p">)</span>
<span class="n">build_docs</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>
<span class="n">copy_files</span><span class="p">(</span><span class="n">artifact_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="builder-responsibility">
<h2>Builder Responsibility<a class="headerlink" href="#builder-responsibility" title="Permalink to this headline">¶</a></h2>
<p>Builders have a very specific job.
They take the updated source code and generate the correct artifacts.
The code lives in <code class="docutils literal"><span class="pre">self.version.project.checkout_path(self.version.slug)</span></code>.
The artifacts should end up in <code class="docutils literal"><span class="pre">self.version.project.artifact_path(version=self.version.slug,</span> <span class="pre">type=self.type)</span></code>
Where <code class="docutils literal"><span class="pre">type</span></code> is the name of your builder.
All files that end up in the artifact directory should be in their final form.</p>
</div>
<div class="section" id="packages-installed-in-the-build-environment">
<h2>Packages installed in the build environment<a class="headerlink" href="#packages-installed-in-the-build-environment" title="Permalink to this headline">¶</a></h2>
<p>The build server does have a select number of C libraries installed, because they are used across a wide array of python projects. We can&#8217;t install every C library out there, but we try and support the major ones. We currently have the following libraries installed:</p>
<blockquote>
<div><ul class="simple">
<li>doxygen</li>
<li>LaTeX (texlive-full)</li>
<li>libevent (libevent-dev)</li>
<li>dvipng</li>
<li>graphviz</li>
<li>libxslt1.1</li>
<li>libxml2-dev</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="writing-your-own-builder">
<h2>Writing your own builder<a class="headerlink" href="#writing-your-own-builder" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Builds happen on a server using only the RTD Public API. There is no reason that you couldn&#8217;t build your own independent builder that wrote into the RTD namespace. The only thing that is currently unsupported there is a saner way than uploading the processed files as a zip.</p>
</div>
<p>The documentation build system in RTD is made pluggable, so that you can build out your own backend. If you have a documentation format that isn&#8217;t currently supported, you can add support by contributing a backend.</p>
<p>The <a class="reference internal" href="api/doc_builder.html"><em>readthedocs.doc_builder</em></a> API explains the higher level parts of the API that you need to implement. A basic run goes something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">backend</span> <span class="o">=</span> <span class="n">get_backend</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">documentation_type</span><span class="p">)</span>
<span class="k">if</span> <span class="n">force</span><span class="p">:</span>
    <span class="n">backend</span><span class="o">.</span><span class="n">force</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
<span class="n">backend</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
<span class="n">backend</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
<span class="k">if</span> <span class="n">success</span><span class="p">:</span>
    <span class="n">backend</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-a-stale-or-broken-build-environment">
<h2>Deleting a stale or broken build environment<a class="headerlink" href="#deleting-a-stale-or-broken-build-environment" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re having trouble getting your version to build, try wiping out the existing build/environment files.  On your version list page <code class="docutils literal"><span class="pre">/projects/[project]/versions</span></code> there is a &#8220;Wipe&#8221; button that will remove all of the files associated with your documentation build, but not the documentation itself.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Build Process</a><ul>
<li><a class="reference internal" href="#how-we-build-documentation">How we build documentation</a><ul>
<li><a class="reference internal" href="#sphinx">Sphinx</a></li>
<li><a class="reference internal" href="#mkdocs">Mkdocs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#understanding-what-s-going-on">Understanding what&#8217;s going on</a></li>
<li><a class="reference internal" href="#builder-responsibility">Builder Responsibility</a></li>
<li><a class="reference internal" href="#packages-installed-in-the-build-environment">Packages installed in the build environment</a></li>
<li><a class="reference internal" href="#writing-your-own-builder">Writing your own builder</a></li>
<li><a class="reference internal" href="#deleting-a-stale-or-broken-build-environment">Deleting a stale or broken build environment</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/builds.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">Citrix SDK 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Citrix Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>